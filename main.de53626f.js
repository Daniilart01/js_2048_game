parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"xXVu":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var l=t[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}function i(e,i,l){return i&&t(e.prototype,i),l&&t(e,l),e}Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tile=void 0;var l=function(){function t(i){e(this,t),this.tile=document.createElement("div"),this.value=0===Math.floor(10*Math.random())?4:2,this.tile.classList.add("tile"),this.tile.classList.add("field-cell--".concat(this.value)),this.tile.textContent=this.value,i.append(this.tile);var l=t.getRandomEmptyPosition();this.x=l[0],this.y=l[1],this.tile.style.setProperty("--index-x",this.x),this.tile.style.setProperty("--index-y",this.y),t.tilesMatrix[l[1]][l[0]]=this,t.isFieldFull()&&t.checkGameEnd()}return i(t,[{key:"moveTileTo",value:function(e,i){this.tile.style.setProperty("--index-x",e),this.tile.style.setProperty("--index-y",i),t.tilesMatrix[i][e]=this,t.tilesMatrix[this.y][this.x]=null,this.x=e,this.y=i}},{key:"mergeTiles",value:function(e){var i=this;return this.tile.classList.remove("field-cell--".concat(this.value)),this.value*=2,this.tile.classList.add("field-cell--".concat(this.value)),this.tile.textContent=this.value,t.tilesMatrix[e.y][e.x]=null,this.tile.style.setProperty("z-index",2),e.tile.style.setProperty("--index-x",this.x),e.tile.style.setProperty("--index-y",this.y),setTimeout(function(){e.tile.remove(),i.tile.style.removeProperty("z-index",2)},200),this.value>=2048&&document.querySelector(".message-win").classList.remove("hidden"),this.value}}],[{key:"initNewTile",value:function(){return new t(document.querySelector(".game-field"))}},{key:"initTilesMatrix",value:function(){for(var e=[],i=0;i<t.TILES_COUNT;i++){e[i]=[];for(var l=0;l<t.TILES_COUNT;l++)e[i][l]=null}return e}},{key:"clearField",value:function(){t.tilesMatrix.forEach(function(e){e.forEach(function(e){null!==e&&e.tile.remove()})}),t.tilesMatrix=t.initTilesMatrix()}},{key:"isFieldFull",value:function(){for(var e=0;e<4;e++)for(var i=0;i<4;i++)if(null===t.tilesMatrix[e][i])return!1;return!0}},{key:"getRandomEmptyPosition",value:function(){var e;do{e=[Math.floor(Math.random()*t.TILES_COUNT),Math.floor(Math.random()*t.TILES_COUNT)]}while(null!==t.tilesMatrix[e[1]][e[0]]);return e}},{key:"checkGameEnd",value:function(){for(var e=!1,i=0;i<4;i++)for(var l=1;l<4;l++)t.tilesMatrix[i][l-1].value===t.tilesMatrix[i][l].value&&(e=!0);for(var r=0;r<4;r++)for(var s=2;s>=0;s--)t.tilesMatrix[r][s+1].value===t.tilesMatrix[r][s].value&&(e=!0);for(var a=0;a<4;a++)for(var n=1;n<4;n++)t.tilesMatrix[n-1][a].value===t.tilesMatrix[n][a].value&&(e=!0);for(var o=0;o<4;o++)for(var u=2;u>=0;u--)t.tilesMatrix[u+1][o].value===t.tilesMatrix[u][o].value&&(e=!0);e||document.querySelector(".message-lose").classList.remove("hidden")}}]),t}();exports.Tile=l,l.TILES_COUNT=4,l.tilesMatrix=l.initTilesMatrix();
},{}],"KIzB":[function(require,module,exports) {
"use strict";var e=require("./tile.js"),i=document.querySelector(".button"),t=document.querySelector(".game-score"),l=document.querySelector(".controls"),r=document.querySelector(".message-win"),s=document.querySelector(".message-lose"),a=document.querySelector(".message-start"),n=!1;function o(r){if(!n)return null;["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(r.key)&&i.classList.contains("start")&&(i.classList.remove("start"),i.classList.add("restart"),i.textContent="Restart",a.classList.add("hidden"));var s=!1,o=0;switch(r.key){case"ArrowLeft":for(var T=0;T<4;T++)for(var c=[],d=0;d<4;d++)null===e.Tile.tilesMatrix[T][d-1]&&e.Tile.tilesMatrix[T][d]?(e.Tile.tilesMatrix[T][d].moveTileTo(d-1,T),s=!0,d=0):e.Tile.tilesMatrix[T][d-1]&&e.Tile.tilesMatrix[T][d]&&(e.Tile.tilesMatrix[T][d-1].value!==e.Tile.tilesMatrix[T][d].value||c.includes(e.Tile.tilesMatrix[T][d])||c.includes(e.Tile.tilesMatrix[T][d-1])||(o+=e.Tile.tilesMatrix[T][d-1].mergeTiles(e.Tile.tilesMatrix[T][d]),s=!0,c.push(e.Tile.tilesMatrix[T][d-1])));s&&e.Tile.initNewTile();break;case"ArrowRight":for(var u=0;u<4;u++)for(var x=[],M=2;M>=0;M--)null===e.Tile.tilesMatrix[u][M+1]&&e.Tile.tilesMatrix[u][M]?(e.Tile.tilesMatrix[u][M].moveTileTo(M+1,u),s=!0,M=4):e.Tile.tilesMatrix[u][M+1]&&e.Tile.tilesMatrix[u][M]&&(e.Tile.tilesMatrix[u][M+1].value!==e.Tile.tilesMatrix[u][M].value||x.includes(e.Tile.tilesMatrix[u][M])||x.includes(e.Tile.tilesMatrix[u][M+1])||(o+=e.Tile.tilesMatrix[u][M+1].mergeTiles(e.Tile.tilesMatrix[u][M]),s=!0,x.push(e.Tile.tilesMatrix[u][M+1])));s&&e.Tile.initNewTile();break;case"ArrowUp":for(var v=0;v<4;v++)for(var w=[],m=1;m<4;m++)null===e.Tile.tilesMatrix[m-1][v]&&e.Tile.tilesMatrix[m][v]?(e.Tile.tilesMatrix[m][v].moveTileTo(v,m-1),s=!0,m=0):e.Tile.tilesMatrix[m-1][v]&&e.Tile.tilesMatrix[m][v]&&(e.Tile.tilesMatrix[m-1][v].value!==e.Tile.tilesMatrix[m][v].value||w.includes(e.Tile.tilesMatrix[m-1][v])||w.includes(e.Tile.tilesMatrix[m][v])||(o+=e.Tile.tilesMatrix[m-1][v].mergeTiles(e.Tile.tilesMatrix[m][v]),s=!0,w.push(e.Tile.tilesMatrix[m-1][v])));s&&e.Tile.initNewTile();break;case"ArrowDown":for(var h=0;h<4;h++)for(var f=[],L=2;L>=0;L--)null===e.Tile.tilesMatrix[L+1][h]&&e.Tile.tilesMatrix[L][h]?(e.Tile.tilesMatrix[L][h].moveTileTo(h,L+1),s=!0,L=3):e.Tile.tilesMatrix[L+1][h]&&e.Tile.tilesMatrix[L][h]&&(e.Tile.tilesMatrix[L+1][h].value!==e.Tile.tilesMatrix[L][h].value||f.includes(e.Tile.tilesMatrix[L+1][h])||f.includes(e.Tile.tilesMatrix[L][h])||(o+=e.Tile.tilesMatrix[L+1][h].mergeTiles(e.Tile.tilesMatrix[L][h]),s=!0,f.push(e.Tile.tilesMatrix[L+1][h])));s&&e.Tile.initNewTile()}if(0!==o){t.textContent=+t.textContent+o;var g=document.createElement("span");l.append(g),g.textContent="+".concat(o),g.classList.add("game-score-add"),setTimeout(function(){g.remove()},1e3)}}function T(){n=!0,a.classList.add("hidden"),i.classList.contains("restart")&&(i.classList.remove("restart"),i.classList.add("start"),i.textContent="Start",s.classList.add("hidden"),r.classList.add("hidden")),e.Tile.clearField(),t.textContent="0",e.Tile.initNewTile(),e.Tile.initNewTile()}function c(e){var i=new Event("keydown");i.key=e,o(i)}window.onload=function(){var e,i,t,l,r=document.body;r.addEventListener("touchstart",function(t){e=t.touches[0].clientX,i=t.touches[0].clientY}),r.addEventListener("touchend",function(r){t=r.changedTouches[0].clientX,l=r.changedTouches[0].clientY;var s=e-t,a=i-l;Math.abs(s)>Math.abs(a)?s>50?c("ArrowLeft"):s<-50&&c("ArrowRight"):a>50?c("ArrowUp"):a<-50&&c("ArrowDown")})},window.addEventListener("keydown",o),i.addEventListener("click",T);
},{"./tile.js":"xXVu"}]},{},["KIzB"], null)
//# sourceMappingURL=main.de53626f.js.map